<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.6: http://docutils.sourceforge.net/" />
<title></title>
<style type="text/css">

/*
:Author: David Goodger (goodger@python.org)
:Id: $Id: html4css1.css 5951 2009-05-18 18:03:10Z milde $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin: 0 0 0.5em 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left, .figure.align-left{
  clear: left ;
  float: left ;
  margin-right: 1em }

img.align-right, .figure.align-right {
  clear: right ;
  float: right ;
  margin-left: 1em }

.align-left {
  text-align: left }

.align-center {
  clear: both ;
  text-align: center }

.align-right {
  text-align: right }

/* reset inner alignment in figures */
div.align-right {
  text-align: left }

/* div.align-center * { */
/*   text-align: left } */

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font: inherit }

pre.literal-block, pre.doctest-block {
  margin-left: 2em ;
  margin-right: 2em }

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document">


<!-- .
////////////////////////////////////////////////////////////////////////
//           _ ___               _                                    //
//          (_)__ \             | |                                   //
//  ___  ___ _   ) |_      _____| |                                   //
// / __|/ __| | / /\ \ /\ / / _ \ '_ \                                //
// \__ \ (__| |/ /_ \ V  V /  __/ |_) |                               //
// |___/\___|_|____| \_/\_/ \___|_.__/                                //
//                                                                    //
// Bringing naturally developed scientific applications to the web    //
// Jorge Zuluaga (2011)                                               //
////////////////////////////////////////////////////////////////////////
. -->
<!-- .
////////////////////////////////////////////////////////////////////////
//           _ ___               _                                    //
//          (_)__ \             | |                                   //
//  ___  ___ _   ) |_      _____| |                                   //
// / __|/ __| | / /\ \ /\ / / _ \ '_ \                                //
// \__ \ (__| |/ /_ \ V  V /  __/ |_) |                               //
// |___/\___|_|____| \_/\_/ \___|_.__/                                //
//                                                                    //
// Bringing naturally developed scientific applications to the web    //
// Jorge Zuluaga (2011)                                               //
////////////////////////////////////////////////////////////////////////
. -->
<!-- .
//////////////////////////////////////////////////////////////////////
//ROLES
//////////////////////////////////////////////////////////////////////
. -->
<style>.red{color:red}</style><!-- See more at: http://docutils.sourceforge.net/docs/ref/rst/definitions.html -->
<!-- .
//////////////////////////////////////////////////////////////////////
//EXTERNAL FILES
//////////////////////////////////////////////////////////////////////
. -->
<!-- This data file has been placed in the public domain. -->
<!-- Derived from the Unicode character mappings available from
<http://www.w3.org/2003/entities/xml/>.
Processed by unicode2rstsubs.py, part of Docutils:
<http://docutils.sourceforge.net>. -->
<!-- .. include:: <isoamsb.txt>
.. include:: <isoamsc.txt>
.. include:: <isoamso.txt>
.. include:: <isoamsr.txt>
.. include:: <isogrk1.txt> -->
<img alt="../images/sci2web-mainlogo.jpg" src="../images/sci2web-mainlogo.jpg" style="height: 100px;" />
<div class="section" id="installation-of-the-server-site">
<h1><a class="toc-backref" href="#id2">Installation of the Server Site</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Author:</th><td class="field-body">Jorge Zuluaga</td>
</tr>
<tr class="field"><th class="field-name">Version:</th><td class="field-body">Revision 1, Wed Nov 30 06:29:15 COT 2011</td>
</tr>
<tr class="field"><th class="field-name">Copyright:</th><td class="field-body">This document has been placed in the public domain.</td>
</tr>
</tbody>
</table>
<div class="contents topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#installation-of-the-server-site" id="id2">Installation of the Server Site</a><ul>
<li><a class="reference internal" href="#abstract" id="id3">Abstract</a></li>
<li><a class="reference internal" href="#presenting-sci2web" id="id4">Presenting Sci2Web</a></li>
<li><a class="reference internal" href="#before-to-start" id="id5">Before to start</a></li>
<li><a class="reference internal" href="#installation" id="id6">Installation</a></li>
<li><a class="reference internal" href="#security-issues" id="id7">Security issues</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="abstract">
<h2><a class="toc-backref" href="#id3">Abstract</a></h2>
<p>This document explains how to install <a class="reference external" href="http://localhost/user/Sci2WebPP">Sci2Web</a> in a web server.  The
installation of <a class="reference external" href="http://localhost/user/Sci2WebPP">Sci2web</a> is a rather simple process as compared with
the installation of similar web tools.  It requires administrative
permissions in your web server.  If you have already succesfully
installed the tool in your web server and want to familiarize with the
example application read the <a class="reference external" href="user.html">user guide</a>.  If you are
prepared to port a new scientific application to your server site read
instead the <a class="reference external" href="developer.html">developer guide</a>.</p>
</div>
<div class="section" id="presenting-sci2web">
<h2>Presenting <a class="reference external" href="http://localhost/user/Sci2WebPP">Sci2Web</a></h2>
<!-- .
////////////////////////////////////////////////////////////////////////
//           _ ___               _                                    //
//          (_)__ \             | |                                   //
//  ___  ___ _   ) |_      _____| |                                   //
// / __|/ __| | / /\ \ /\ / / _ \ '_ \                                //
// \__ \ (__| |/ /_ \ V  V /  __/ |_) |                               //
// |___/\___|_|____| \_/\_/ \___|_.__/                                //
//                                                                    //
// Bringing naturally developed scientific applications to the web    //
// Jorge Zuluaga (2011)                                               //
////////////////////////////////////////////////////////////////////////
. -->
<p><a class="reference external" href="http://localhost/user/Sci2WebPP">Sci2Web</a> is a <em>web framework</em> intended to provide web interfaces to
<em>Scientific Applications</em> (SAs).  A Scientific Application is a piece
of software developed or adapted by scientist to solve scientific
problems.  Although it is common today to find powerful software
providing advanced graphical and user interfaces (e.g. Reduce, SAGE,
Mathematica, Matlab), a huge fraction of the specific software
developed and/or used by scientist still relies on programs developed
in low level programming languages (C, fortran).  Even although a
growing number of scientist are using powerful and modern programming
languajes (C++, Java, Python) their programs still have simplified
user interfaces and most of them lack of a proper graphical interface.</p>
<p>In most cases SAs simply does not require to have such advanced user
or graphical interfaces.  Most of the time scientists restrict their
programs just for their personal use or share it only with close
colleagues and students.  But from time to time a <em>good piece of code</em>
arises having the potential to become a publickly available SA.  The
decision to share a SA and allows other to use it is a wise decision
that in some cases have a very positive impact on the visibility of
scientific work.  However the development of software intended for
what we can call <em>final users</em> and although they could be experts, is
challenging even for a skillful scientific developer.  Many skills are
required ranging from operating system programming to advanced
graphical interfaces development.</p>
<p><a class="reference external" href="http://localhost/user/Sci2WebPP">Sci2Web</a> is a solution created for those scientist who desire to share
the software they developed with a wider scientific community but to
the lowest developing cost.  It provides the means to configure a
fully albeit simple web interface even to very complex scientific
applications without the burden of change the original software or
develop advanced graphical interfaces.  But <a class="reference external" href="http://localhost/user/Sci2WebPP">Sci2Web</a> is much more than
that.  It provides you a platform to publish your application in the
web, automatically generate properly prepared tarballs of your
software, give access to related papers and other information
important for the visibility of your scientific work, among other
features.  To know many of the advantages offered by <a class="reference external" href="http://localhost/user/Sci2WebPP">Sci2Web</a> read the
<a class="reference external" href="white-paper.pdf">white paper</a>.</p>
<p>If you want to see a living example go now to the <a class="reference external" href="http://astronomia.udea.edu.co/Sci2Web/app.php?SetApp=true&amp;App=MercuPy&amp;VersionNum=0&amp;VersionId_0=2B-dev">MercuPy</a>,
the sample application served in <a class="reference external" href="http://sci2web.org">the home site of the project</a>.</p>
<p><a class="reference external" href="http://localhost/user/Sci2WebPP">Sci2Web</a> is not a content or a version management software.  It simply
provides the required tools to configure and run SA applications in
the web.</p>
</div>
<div class="section" id="before-to-start">
<h2><a class="toc-backref" href="#id5">Before to start</a></h2>
<p>Before to proceed with the installation of <a class="reference external" href="http://localhost/user/Sci2WebPP">Sci2Web</a> check that the
following dependencies are installed in your web server:</p>
<ul class="simple">
<li>Apache2 server (debian package, dp:<tt class="docutils literal">apache2</tt>)</li>
<li>PHP and PHP+MySQL modules (dp: <tt class="docutils literal">php5</tt> , <tt class="docutils literal"><span class="pre">php5-mysql</span></tt> )</li>
<li>Perl language</li>
<li>DBI and DBD-MySQL perl modules (dp: <tt class="docutils literal"><span class="pre">libdbi-perl</span></tt> , <tt class="docutils literal"><span class="pre">libdbd-mysql-perl</span></tt>)</li>
<li>Python language</li>
<li>Matplotlib library (dp: <tt class="docutils literal"><span class="pre">python-matplotlib</span></tt>)</li>
<li>Delayed job execution and batch processing package, <tt class="docutils literal">at</tt> (dp:
<tt class="docutils literal">at</tt>)</li>
<li>The GNU Fortran 95 compiler (dp:<tt class="docutils literal">gfortran</tt>)</li>
<li>The GNU C++ compiler (dp: <tt class="docutils literal">g++</tt>)</li>
</ul>
<p>The last two packages are required to compile and run the sample
application coming with the <a class="reference external" href="http://localhost/user/Sci2WebPP">Sci2Web</a> server site.</p>
<p>Ubuntu users, and in general Debian administrators, could find useful
the following command to install all the required packages in your
server:</p>
<pre class="literal-block">
% sudo apt-get install --yes --force-yes apache2 php5 php5-mysql perl python libdbi-perl libdbd-mysql-perl python-matplotlib gfortran g++
</pre>
<p>Here the symbol <tt class="docutils literal">%</tt> replaces the prompt and hereafter will be used
to denote a command that should be executed in the linux console.</p>
<div class="important">
<p class="first admonition-title">Important</p>
<p>Hereafter we will use also the follwoing aliases when
referring to important directories, files or other global
properties that could change from machine to machine:</p>
<ul class="simple">
<li><strong>PROJPATH</strong>: directory where the <a class="reference external" href="http://localhost/user/Sci2WebPP">Sci2Web</a> site is placed at the
server (e.g. /var/www/html/Sci2Web).</li>
<li><strong>APACHE_USER</strong> and <strong>APACHE_GROUP</strong>.  User and group of the
apache2 server.  Typically they are <tt class="docutils literal"><span class="pre">www-data</span></tt> and <tt class="docutils literal"><span class="pre">www-data</span></tt>.</li>
</ul>
<p>The following terms will be also frequently used in this and other
documents:</p>
<ul class="last simple">
<li><strong>Sci2Web Server Site</strong>.  This is a server where <a class="reference external" href="http://localhost/user/Sci2WebPP">Sci2Web</a> is
installed and serving Scientific Application.  It is different
from the <strong>Sci2Web Home Site</strong> which is the home site of the
tool.</li>
<li><strong>Ported Application</strong>.  This is an application that has been
installed in a <a class="reference external" href="http://localhost/user/Sci2WebPP">Sci2Web</a> server site.</li>
</ul>
</div>
</div>
<div class="section" id="installation">
<h2><a class="toc-backref" href="#id6">Installation</a></h2>
<p>To install a <a class="reference external" href="http://localhost/user/Sci2WebPP">Sci2Web</a> server site in your server follow these steps:</p>
<ol class="arabic">
<li><p class="first"><strong>Get a copy of the software</strong>.  The software can be download
directly from github <a class="reference external" href="https://github.com/facom/Sci2Web">https://github.com/facom/Sci2Web</a>.  If you
also want to obtain fresh updates of the tool directly in your
local copy you can instead obtain an anonymous clone of the
project:</p>
<pre class="literal-block">
% git clone git://github.com/facom/Sci2Web.git
</pre>
<p>In this case <tt class="docutils literal">git</tt> must be installed in the server.  Every time
you want to update your copy just execute:</p>
<pre class="literal-block">
% git pull
</pre>
</li>
</ol>
<div class="important">
<p class="first admonition-title">Important</p>
<p class="last">The update procedure performed with the <tt class="docutils literal">git pull</tt>
command will not overwrite either the local configuration of your
server site nor any of the files created after the installation.</p>
</div>
<ol class="arabic">
<li><p class="first"><strong>Configure the site</strong>.  All the <a class="reference external" href="http://localhost/user/Sci2WebPP">Sci2Web</a> server sites installed
around the globe are by default identical and assume default values
for several key parameters.  In order to customize you server site
you need to create and properly edit the configuration files
<tt class="docutils literal">PROJPATH/lib/sci2web.conf</tt> and <tt class="docutils literal">PROJPATH/lib/sci2web.db</tt>.  A
generic template could be obtained from the
<tt class="docutils literal">PROJPATH/doc/install</tt> directory:</p>
<pre class="literal-block">
% cp doc/install/sci2web.{conf,db} lib/
</pre>
<p>Edit the files setting up the parameters specific to your server
site.  Among the parameters that you could set up in this files
are:</p>
<ul>
<li><p class="first"><strong>PROJBASE</strong> and <strong>PROJNAME</strong>: The URL of your project will be
recognized as: <tt class="docutils literal"><span class="pre">http://server/PROJBASE/PROJNAME</span></tt>.  Configure
properly these variables in order to have right links in your
website.</p>
</li>
<li><p class="first"><strong>SCI2WEBSITE</strong>: This is the name of the <em>local server site</em>
where the <a class="reference external" href="http://localhost/user/Sci2WebPP">Sci2Web</a> is installed.  This name will be used in
different places of the site to distinguish it from other server
sites found around the web.  You can use the name of your
institution, research group or even your personal name.</p>
</li>
<li><p class="first"><strong>ENTRYPAGE</strong>: The entry page is the webpage displayed by default
when the base URL is used. Some useful entry pages are:</p>
<ul class="simple">
<li><tt class="docutils literal">main.php</tt>, main page of the site.</li>
<li><tt class="docutils literal"><span class="pre">main.php?TabId=4</span></tt>, open main page in the fourth tab
(i.e. the tab where the list of applications are displayed).</li>
<li><tt class="docutils literal"><span class="pre">app.php?SetApp=true&amp;App=MercuPy&amp;VersionNum=0&amp;VersionId_0=2B-dev</span></tt>,
open the page of the sample application.</li>
</ul>
</li>
<li><p class="first"><strong>WEBMASTER</strong>: E-mail of the person working as the web master of
the server site.  Please sign up for an account with the e-mail
you set here as soon as you have installed your server site.  The
user registered with this e-mail will have <em>administrative</em>
permissions on the site including rights to edit the main page
contents and to manipulate all the web pages of the served
applications.</p>
</li>
<li><p class="first"><strong>MAINLOGO</strong>: Name of the image containing the logo appearing in
the header of the server site webpage.  By default all the server
sites use the <a class="reference external" href="http://localhost/user/Sci2WebPP">Sci2Web</a> main logo.  The main logo should be placed
at the <tt class="docutils literal">images</tt> directory.  We recommend to use a main logo
including the image of your institution or group and include a
small version of the the <a class="reference external" href="http://localhost/user/Sci2WebPP">Sci2Web</a> logo.  An example logo
<tt class="docutils literal"><span class="pre">testserver-mainlogo.jpg</span></tt> is provided.  You can edit your logo
using the <em>Open Office Draw</em> file <tt class="docutils literal"><span class="pre">images/sci2web-design.odg</span></tt>.</p>
</li>
<li><p class="first"><strong>DBNAME</strong>, <strong>DBSERVER</strong>, <strong>DBUSER</strong>, <strong>DBPASS</strong>: Properties of
the database.  Change only if you actually know what are you
doing.  This properties are used frequently in other components
of the site and it is recommended <em>not to change them</em>.  However
for security issues it is important to set up a different
password for the database user.  In this case be sure that you
use the same password in the rest of this procedure.</p>
</li>
<li><p class="first"><strong>MAINTABS</strong>: You can customize the server site main page by
choosing which tabs and in which order they will be rendered.
The <tt class="docutils literal">MAINTABS</tt> configuration variable controls this property.
There are four available tabs: <tt class="docutils literal">presentation</tt>,
<tt class="docutils literal">documentation</tt>, <tt class="docutils literal">instituion</tt> and <tt class="docutils literal">applications</tt>.  The
content of the first three are fully editable by the <em>Web Master</em>
(<a class="reference external" href="mailto:sci2web&#64;gmail.com">sci2web&#64;gmail.com</a>)</p>
</li>
<li><p class="first"><strong>ENABLEMAIL</strong>: enable the sending of e-mail from the website.
Several features of the website use e-mail to notify the users
about important actions.  The creation of user accounts,
notification about a new update of an application and even
notifications of the complete execution of a run are some of the
key processes requiring e-mail.  It is strongly recomended
configure e-mail to activate these features in your <a class="reference external" href="http://localhost/user/Sci2WebPP">Sci2Web</a>
server site.</p>
<p>If your server definitively does not have the possibility to send
e-mail set this variable to <tt class="docutils literal">false</tt>.  In this case all the
messages generated by the website will be stored in the text file
<tt class="docutils literal">PROJPATH/log/mail.log</tt>.</p>
</li>
</ul>
</li>
<li><p class="first"><strong>Set permissions for critical directories</strong>.  Several directories
in your website should have reading and writing permission for the
apache user.  Instead of simply change the permissions to allow an
unrestricted access to those directories we recommend to change
their ownership:</p>
<pre class="literal-block">
% chown -R APACHE_USER.APACHE_GROUP runs tmp log
% chown -R APACHE_USER.APACHE_GROUP apps/*/*.html
% chown -R APACHE_USER.APACHE_GROUP pages/*
% chown -R APACHE_USER.APACHE_GROUP js/ckfinder/userfiles
% chown APACHE_USER.APACHE_GROUP lib/sci2web.{conf,db}
% chmod og-rw lib/sci2web.{conf,db}
% chmod a+x bin/*
</pre>
<p>You can use the script <tt class="docutils literal">PROJPATH/doc/install/setperms.sh</tt> to
perform this task:</p>
<pre class="literal-block">
% bash doc/install/setperms.sh
</pre>
</li>
<li><p class="first"><strong>Create the database</strong>.  <a class="reference external" href="http://localhost/user/Sci2WebPP">Sci2Web</a> server site uses systematically
mysql databases to store information about applications, users,
runs, etc.  It is important to set up properly the mysql server to
access and modify those databases.  Before to start you have to
create a user with the proper permissions to create and modify the
<a class="reference external" href="http://localhost/user/Sci2WebPP">Sci2Web</a> database.  Login into the mysql server as <tt class="docutils literal">root</tt> and
execute:</p>
<pre class="literal-block">
mysql&gt; create user 'sci2web'&#64;'localhost' identified by 'WebPoweredSAs';
</pre>
<p>The information about the user (login and password) should be the
same as that stored in the master configuration file.</p>
<p>Now you can create the <a class="reference external" href="http://localhost/user/Sci2WebPP">Sci2Web</a> database, their basic tables and
populate them with basic information.  This is a non-trivial
process.  The sql commands to properly perform this task are found
in the text file <tt class="docutils literal">doc/install/sci2web.sql</tt>.  Be sure that the
information about the database and the user recently created to
modify it has been properly set up in this file.  Once you have
verified this information execute in the console:</p>
<pre class="literal-block">
$ mysql -u root -p &lt; doc/install/sci2web.sql
</pre>
<p>If any error arises at this step please verify that the password
you have set up for the database user is consistent along the files
<tt class="docutils literal">lib/sci2web.conf</tt>, <tt class="docutils literal">lib/sci2web.db</tt>,
<tt class="docutils literal">doc/install/sci2web.sql</tt> and in the creation command you have
used in mysql.  If something is wrong you can still undo the
creation of the user using the command:</p>
<pre class="literal-block">
mysql&gt; drop user 'sci2web'&#64;'localhost';
</pre>
<p>and try to repeat the preceeding procedure.</p>
</li>
<li><p class="first"><strong>Compile the sample application</strong>.  The <a class="reference external" href="http://localhost/user/Sci2WebPP">Sci2Web</a> server site comes
with a sample application called <strong>MecuPy</strong>.  This is a Python
Wraped version of the well known <em>Mercury</em> n-body integrator (see
the <a class="reference external" href="white-paper.pdf">Sci2Web white paper</a>.  Before to start using
your newly configured <a class="reference external" href="http://localhost/user/Sci2WebPP">Sci2Web</a> server site, you must compile the
application and create the proper entries in the server site
database.  Perform this using the following commands:</p>
<pre class="literal-block">
% cd apps/MercuPy
% ./install-app.sh
</pre>
<p>If any error arises at this point with compilation of the
application it should be related to the fortran and C++ compiler.
Please check carefully that the compilers are properly installed
and configured.  It should be stressed that the sample application
does not depend on third party software or libraries previously
installed in the web server besides those enumerated in the
<a class="reference internal" href="#before-to-start">Before to start</a> section.</p>
</li>
<li><p class="first"><strong>Test the configuration</strong>.  In order to test the configuration of
the site open the page
<tt class="docutils literal"><span class="pre">http://SERVERURL/PROJBASE/PROJNAME/test.php</span></tt>.  This php script
test the access to the database and several key files and
directories.  If an error is raised at this point check your
configuration and reload the test script.</p>
</li>
<li><p class="first"><strong>Load the server site</strong>.  Once the test script has ran
successfully check directly the site server by going to
<tt class="docutils literal"><span class="pre">http://SERVERURL/PROJBASE/PROJNAME</span></tt>.</p>
<p>If after load the mainpage all the tabs appear blank check the
permissions of the <tt class="docutils literal">PROJPATH/pages/main</tt> directory.</p>
</li>
<li><p class="first"><strong>Create basic user accounts</strong>.  To start using the tool you have
to sign up for an account.  There are two basic user accounts: the
WEBMASTER account and the test account (<tt class="docutils literal">test&#64;sci2web.org</tt>).
Using the WEBMASTER account (as configured in the <tt class="docutils literal">sci2web.conf</tt>
configuration file) you will be able to manage every aspect of the
server site.  With the test account you will be able to edit and
perform other administrative operations under the example
application.  It is recommended to create this account as soon as
you complete the installation to avoid that an anonymous user gain
access to administrative permissions on the example application.</p>
<p>After signup for this account and if you have not enabled the
sending of e-mail, the link to activate it will be found in the log
file <tt class="docutils literal">log/mail.log</tt>.  Copy the link from this file and paste it
into your browser.</p>
</li>
</ol>
<p>At this point you have a new <a class="reference external" href="http://localhost/user/Sci2WebPP">Sci2Web</a> <strong>server site</strong> and can start
porting your SAs into it and sharing with the scientific community.</p>
<p>Enjoy it!</p>
</div>
<div class="section" id="security-issues">
<h2><a class="toc-backref" href="#id7">Security issues</a></h2>
<p>Security is an important concern when working in the web.  In order to
use <a class="reference external" href="http://localhost/user/Sci2WebPP">Sci2Web</a> you should be sure that several aspects of the server
configuration has been set up on one hand to allow the use of the
computational power available in your server and on the other hand to
avoid attacks to your server coming form the <a class="reference external" href="http://localhost/user/Sci2WebPP">Sci2Web</a> website.</p>
<ul>
<li><p class="first"><strong>Apache2 configuration</strong>.  To avoid the access to critical files
and directories in the website you should configure Apache2 to deny
the listing of directories where an index file is not present.  To
perform this allows the overriding of the apache options at the
<tt class="docutils literal">.htaccess</tt> files adding to your /etc/apache2/apache2.conf file
the following section:</p>
<pre class="literal-block">
&lt;Directory &quot;PROJPATH&quot;&gt;
AllowOverride All
&lt;/Directory&gt;
</pre>
<p>Don't forget to restart the apache2 server (e.g. <tt class="docutils literal">% service apache2
restart</tt>).</p>
<p>Among the critical files protected with this measure are the
<tt class="docutils literal">lib/sci2web.conf</tt> and <tt class="docutils literal">lib/sci2web.db</tt> files which contains
private and critical security information about your site.  If
apache is properly configured no one will be able to hack your
configuration file.  Be sure that this works by trying to retrieve
the content of the configuration file using the browser and the URL
<tt class="docutils literal"><span class="pre">http://server/PROJBASE/PROJNAME/lib/sci2web.conf</span></tt>.  If the
content of your configuration file is displayed check again the
configuration of the apache server.</p>
<p>The regular users of the server will not be able either to read or
change those files.  Only the root user will be able to modify this
behavior.</p>
</li>
<li><p class="first"><strong>Allow the use of the batch processing package</strong>.  <a class="reference external" href="http://localhost/user/Sci2WebPP">Sci2Web</a> uses by
default the <tt class="docutils literal">at</tt> delayed job execution and batch processing
package in order to submit and run the applications launched from
the website.  By default the <tt class="docutils literal">at</tt> command is disabled for the
APACHEUSER.  Grant permissions to the APACHEUSER to the at queue by
commenting the username at the <tt class="docutils literal">/etc/at.deny</tt> file.</p>
<p>You can configure here another batch processing packages and job
scheduler software.  To configure <a class="reference external" href="http://localhost/user/Sci2WebPP">Sci2Web</a> to use other submission
systems please see the <a class="reference external" href="developer.html">developer guide</a>.</p>
</li>
<li><p class="first"><strong>Set up bash as the default shell used to executed the jobs at the
processing package</strong>.  <a class="reference external" href="http://localhost/user/Sci2WebPP">Sci2Web</a> uses bash as the default language
for the submission scripts.  Several schedulers, including <tt class="docutils literal">at</tt>
uses by default <tt class="docutils literal">dash</tt> as the default scripting language.
Normally this is performed by creating a symbolic link to
<tt class="docutils literal">/bin/dash</tt> as <tt class="docutils literal">/bin/sh</tt>.  Change this default configuration in
order to make <tt class="docutils literal">sh</tt> point out to <tt class="docutils literal">bash</tt>.</p>
</li>
</ul>
<hr class="docutils" />
<p>Copyright (C) 2011 Jorge I. Zuluaga</p>
</div>
</div>
</div>
</body>
</html>
