<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.8.1: http://docutils.sourceforge.net/" />
<title></title>
<style type="text/css">

/*
:Author: David Goodger (goodger@python.org)
:Id: $Id: html4css1.css 7056 2011-06-17 10:50:48Z milde $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

object[type="image/svg+xml"], object[type="application/x-shockwave-flash"] {
  overflow: hidden;
}

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin: 0 0 0.5em 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left, .figure.align-left, object.align-left {
  clear: left ;
  float: left ;
  margin-right: 1em }

img.align-right, .figure.align-right, object.align-right {
  clear: right ;
  float: right ;
  margin-left: 1em }

img.align-center, .figure.align-center, object.align-center {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

.align-left {
  text-align: left }

.align-center {
  clear: both ;
  text-align: center }

.align-right {
  text-align: right }

/* reset inner alignment in figures */
div.align-right {
  text-align: inherit }

/* div.align-center * { */
/*   text-align: left } */

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font: inherit }

pre.literal-block, pre.doctest-block, pre.math {
  margin-left: 2em ;
  margin-right: 2em }

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document">


<!-- .
////////////////////////////////////////////////////////////////////////
//           _ ___               _                                    //
//          (_)__ \             | |                                   //
//  ___  ___ _   ) |_      _____| |                                   //
// / __|/ __| | / /\ \ /\ / / _ \ '_ \                                //
// \__ \ (__| |/ /_ \ V  V /  __/ |_) |                               //
// |___/\___|_|____| \_/\_/ \___|_.__/                                //
//                                                                    //
// Bringing naturally developed scientific applications to the web    //
// Jorge Zuluaga (2011)                                               //
////////////////////////////////////////////////////////////////////////
. -->
<!-- .
////////////////////////////////////////////////////////////////////////
//           _ ___               _                                    //
//          (_)__ \             | |                                   //
//  ___  ___ _   ) |_      _____| |                                   //
// / __|/ __| | / /\ \ /\ / / _ \ '_ \                                //
// \__ \ (__| |/ /_ \ V  V /  __/ |_) |                               //
// |___/\___|_|____| \_/\_/ \___|_.__/                                //
//                                                                    //
// Bringing naturally developed scientific applications to the web    //
// Jorge Zuluaga (2011)                                               //
////////////////////////////////////////////////////////////////////////
. -->
<!-- .
//////////////////////////////////////////////////////////////////////
//ROLES
//////////////////////////////////////////////////////////////////////
. -->
<style>.red{color:red}</style><!-- See more at: http://docutils.sourceforge.net/docs/ref/rst/definitions.html -->
<!-- This data file has been placed in the public domain. -->
<!-- Derived from the Unicode character mappings available from
<http://www.w3.org/2003/entities/xml/>.
Processed by unicode2rstsubs.py, part of Docutils:
<http://docutils.sourceforge.net>. -->
<!-- .. include:: <isoamsb.txt>
.. include:: <isoamsc.txt>
.. include:: <isoamso.txt>
.. include:: <isoamsr.txt>
.. include:: <isogrk1.txt> -->
<img alt="../images/sci2web-mainlogo.jpg" src="../images/sci2web-mainlogo.jpg" style="height: 100px;" />
<div class="section" id="installation-of-the-server-site">
<h1>Installation of the Server Site</h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Author:</th><td class="field-body">Jorge Zuluaga</td>
</tr>
<tr class="field"><th class="field-name">Version:</th><td class="field-body">Revision 1, Wed Nov 30 06:29:15 COT 2011</td>
</tr>
<tr class="field"><th class="field-name">Copyright:</th><td class="field-body">This document has been placed in the public domain.</td>
</tr>
</tbody>
</table>
<div class="section" id="abstract">
<h2>Abstract</h2>
<p>This document explains how to install <a class="reference external" href="http://localhost/user/Sci2WebPP">Sci2Web</a> in a web server.  The
installation of <a class="reference external" href="http://localhost/user/Sci2WebPP">Sci2web</a> is a simple process (as compared with the
installation of similar web tools).  It is required to have superuser
level permissions.</p>
</div>
<div class="section" id="presenting-sci2web">
<h2>Presenting <a class="reference external" href="http://localhost/user/Sci2WebPP">Sci2Web</a></h2>
<p><a class="reference external" href="http://localhost/user/Sci2WebPP">Sci2Web</a> is a tool to provide graphical web interfaces to <em>Naturally
Developed Scientific Applications</em> (NDSAs).  NDSAs is a generic name
we use to call those programs developed or adapted by scientist and
used in scientific research.  Although today you can find powerful
scientific software providing advanced graphical and user interfaces
(e.g. Reduce, SAGE, Mathematica, Matlab) many scientific work still
depend on programs developed in low level programming languages (C,
fortran).  Even although a growing number of scientist are using
powerful and modern languajes (C++, Java, Python) their programs still
have simplified user interfaces and most of them lack of a proper
graphical interface (in most cases these interfaces are simply not
required or not important in the scientific work).</p>
<p>Most of the time scientists restrict their programs just for their
personal use or share it only with close colleagues.  But from time to
time a <em>good piece of code</em> arises having the potential to become a
publickly available program.  The decision to share a program and
allows other to use it is a wise decision that in some cases have a
very positive impact on the visibility of the developer scientific
work.  However the development of software intended for <em>final users</em>,
even although they could be experts, could be a challenge even for a
skillful scientific developer.  Many skills are required ranging from
operating system programming to advanced graphical interfaces
development.</p>
<p><a class="reference external" href="http://localhost/user/Sci2WebPP">Sci2Web</a> is a solution created for those scientist who desire to share
the software they developed with a wider scientific community but to
the lowest developing cost.  Imagine to have an <em>active web page</em> (a
web page whose content changes according to the user input) able to
configure and control the execution of your programs?  This is exactly
what <a class="reference external" href="http://localhost/user/Sci2WebPP">Sci2Web</a> provides you.  If you want to see a living example go
now to the <a class="reference external" href="http://www.google.com">Diffusion application</a>.</p>
<p><a class="reference external" href="http://localhost/user/Sci2WebPP">Sci2Web</a> is not a content or a version management software.  It simply
provides the required tools to configure and run NDSA applications
using the web.</p>
</div>
<div class="section" id="install-sci2web-in-a-new-server">
<h2>Install Sci2Web in a new server</h2>
<p>Before to proceed with the installation of <a class="reference external" href="http://localhost/user/Sci2WebPP">Sci2Web</a> check that the
following dependencies are installed in your web server:</p>
<ul class="simple">
<li>Apache2 server (debian package, dp:<tt class="docutils literal">apache2</tt>)</li>
<li>PHP and PHP+MySQL modules (dp: <tt class="docutils literal">php5</tt> , <tt class="docutils literal"><span class="pre">php5-mysql</span></tt> )</li>
<li>Perl language</li>
<li>DBI and DBD-MySQL perl modules (dp: <tt class="docutils literal"><span class="pre">libdbi-perl</span></tt> , <tt class="docutils literal"><span class="pre">libdbd-mysql-perl</span></tt>)</li>
<li>Python language</li>
<li>Matplotlib library (dp: <tt class="docutils literal"><span class="pre">python-matplotlib</span></tt>)</li>
<li>Delayed job execution and batch processing package, <tt class="docutils literal">at</tt> (dp:
<tt class="docutils literal">at</tt>)</li>
</ul>
<p>Ubuntu users, and in general Debian administrators, could find useful
the following command to install all the required packages in your
server:</p>
<pre class="literal-block">
% sudo apt-get install --yes --force-yes apache2 php5 php5-mysql perl python libdbi-perl libdbd-mysql-perl python-matplotlib
</pre>
<p>The symbol <tt class="docutils literal">%</tt> replaces the prompt and hereafter will be used to
denote a command that should be executed in the linux console.</p>
<div class="important">
<p class="first admonition-title">Important</p>
<p>Hereafter we will use the follwoing aliases when
referring to important directories, files or other global
properties that could change from machine to machine:</p>
<ul class="last simple">
<li><strong>PROJPATH</strong>: directory where the <a class="reference external" href="http://localhost/user/Sci2WebPP">Sci2Web</a> site is placed at the
server (e.g. /var/www/html/Sci2Web).</li>
<li><strong>APACHE_USER</strong> and <strong>APACHE_GROUP</strong>.  User and group of the
apache2 server.  Typically they are <tt class="docutils literal"><span class="pre">www-data</span></tt> and <tt class="docutils literal"><span class="pre">www-data</span></tt>.</li>
</ul>
</div>
<p>To install a <strong>Sci2Web_ server site</strong> in your machine follow these
steps:</p>
<ol class="arabic">
<li><p class="first"><strong>Get a copy of the software</strong>.  The software can be download
directly from github <a class="reference external" href="https://github.com/facom/Sci2Web">https://github.com/facom/Sci2Web</a>.  If you
also want to obtain fresh updates of the tool directly in your
local copy you can obtain a git clone of the project:</p>
<pre class="literal-block">
% git clone git://github.com/facom/Sci2Web.git
</pre>
<p>In this case <tt class="docutils literal">git</tt> must be installed in the server.  Every time
you want to update your copy just execute:</p>
<pre class="literal-block">
% git pull
</pre>
</li>
<li><p class="first"><strong>Edit the master configuration file</strong>.  You can set up the basic
information about your server in the master configuration file
<tt class="docutils literal">PROJPATH/lib/sci2web.conf</tt>.  The most important variables in
this file are:</p>
<ul class="simple">
<li><strong>PROJBASE</strong> and <strong>PROJNAME</strong>: The URL of your project will be
recognized as: <tt class="docutils literal"><span class="pre">http://server/PROJBASE/PROJNAME</span></tt>.  Configure
properly these variables in order to have right links in your
website.</li>
<li><strong>SCI2WEBSITE</strong>: This is the name of the <em>local server</em> where the
<a class="reference external" href="http://localhost/user/Sci2WebPP">Sci2Web</a> platform is installed.  This name will be used in
different places of the platform to distinguish this instance of
Sci2Web from other ones found around the web.  Here you can use
the name of your institution, research group and even your
personal name.</li>
<li><strong>ENTRYPAGE</strong>: The entry page is the page the site displays when
the above URL is enetered.  By default it is <tt class="docutils literal">test.php</tt>.  You
can change it according to your own interests.  Some useful entry pages are:<ul>
<li><tt class="docutils literal">main.php</tt> , main page of the platform.</li>
<li><tt class="docutils literal"><span class="pre">main.php?TabId=3</span></tt> , main page open in the fourth tab
(i.e. the tab where the list of applications are displayed).</li>
<li><tt class="docutils literal"><span class="pre">app.php?SetApp=true&amp;App=Diffusion&amp;VersionId=1&amp;TabId=1</span></tt> ,
open the page of version 'dev' (version id 1) of application
'Diffusion' at the first tab (i.e. description of application)</li>
</ul>
</li>
</ul>
<!-- Important: If you change the information about the database
(name of the database or the authorized user, password of the
user) you must also edit that information in the
``bin/sci2web.pm`` file. -->
</li>
<li><p class="first"><strong>Set permissions for critical directories</strong>.  Several directories
in your website should have writing permission for the apache
user:</p>
<pre class="literal-block">
$ chown -R APACHE_USER.APACHE_GROUP runs tmp
$ chown -R APACHE_USER.APACHE_GROUP apps/*/*.html
$ chown -R APACHE_USER.APACHE_GROUP pages/*/content/*.html
$ chown -R APACHE_USER.APACHE_GROUP js/ckfinder/userfiles
</pre>
<p>You can use the script <tt class="docutils literal">PROJPATH/doc/install/setperms.sh</tt> to
change automatically permissions.</p>
</li>
<li><p class="first"><strong>Set up the database server</strong>.  <a class="reference external" href="http://localhost/user/Sci2WebPP">Sci2Web</a> site uses systematically
mysql databases to store information about applications, users,
runs, etc.  In order to use the platform it is important to set up
properly the mysql server to accept the creation and modification
of the platform databases.  Before to start you have to create a
user with the proper permissions to create and modify the <a class="reference external" href="http://localhost/user/Sci2WebPP">Sci2Web</a>
database.  Login into the mysql server as <tt class="docutils literal">root</tt> and execute:</p>
<pre class="literal-block">
mysql&gt; create user 'sci2web'&#64;'localhost' identified by 'WebPoweredNDSA';
</pre>
<p>The information about the user (login and password) should be the
same as that stored in the master configuration file.</p>
</li>
<li><p class="first"><strong>Create Sci2Web database and populate it with basic
information</strong>.  You will find the proper sql commands to create and
populate the <a class="reference external" href="http://localhost/user/Sci2WebPP">Sci2Web</a> database at <tt class="docutils literal">doc/install</tt>.  To perform this
actions just run:</p>
<pre class="literal-block">
$ mysql -u root -p &lt; doc/install/sci2web.sql
</pre>
</li>
<li><p class="first"><strong>Test the configuration</strong>.  In order to test the configuration of
the site open the page
<tt class="docutils literal"><span class="pre">http://SERVERURL/PROJBASE/PROJNAME/test.php</span></tt>.  This php script
test the access to the database and several key files and
directories.  If an error is raised at this point check your
configuration and reload the test script.</p>
</li>
<li><p class="first">Once the test script has ran successfully check directly the
website by going to <tt class="docutils literal"><span class="pre">http://SERVERURL/PROJBASE/PROJNAME</span></tt>.</p>
</li>
</ol>
<p>If you want to start using the example application coming with the
platform creates an account and enjoy!</p>
<div class="important">
<p class="first admonition-title">Important</p>
<p class="last">If you create an account with the e-mail
<tt class="docutils literal">test&#64;sci2web.org</tt> you will be able to edit and perform other
administrative operations under the example application.  It is
recommended to create this account as soon as you complete the
installation of your platform to avoid that an anonymous user gain
access to this administrative powers on the example application.</p>
</div>
</div>
<div class="section" id="security-issues">
<h2>Security issues</h2>
<p>Security is an important concern when working in the web.  In order to
use <a class="reference external" href="http://localhost/user/Sci2WebPP">Sci2Web</a> you should be sure that several aspects of the server
configuration has been ste up on one hand to allow the use of the
computational power available in your server and on the other hand to
avoid attacks to your server coming form the <a class="reference external" href="http://localhost/user/Sci2WebPP">Sci2Web</a> website.</p>
<ul>
<li><p class="first"><strong>Apache2 configuration</strong>.  To avoid the access to critical files
and directories in the website you should configure Apache2 to deny
the listing of directories where an index file is not present.  To
perform this allows the overriding of the apache options at the
<tt class="docutils literal">.htaccess</tt> files adding to your /etc/apache2/apache2.conf file
the following section:</p>
<pre class="literal-block">
&lt;Directory &quot;PROJPATH&quot;&gt;
AllowOverride All
&lt;/Directory&gt;
</pre>
</li>
<li><p class="first"><strong>Allow the use of the batch processing package</strong>.  <a class="reference external" href="http://localhost/user/Sci2WebPP">Sci2Web</a> uses by
default the <tt class="docutils literal">at</tt> delayed job execution and batch processing
package in order to submit and run the applications launched from
the website.  By default the <tt class="docutils literal">at</tt> command is disabled for the
APACHEUSER.  Grant permissions to the APACHEUSER to the at queue by
commenting the username at the <tt class="docutils literal">/etc/at.deny</tt> file.</p>
<p>You can configure here another batch processing packages and job
scheduler software.  To configure <a class="reference external" href="http://localhost/user/Sci2WebPP">Sci2Web</a> to use other submission
systems please see the developer guide.</p>
</li>
<li><p class="first"><strong>Set up bash as the default shell used to executed the jobs at the
processing package</strong>.  <a class="reference external" href="http://localhost/user/Sci2WebPP">Sci2Web</a> uses bash as the default language
for the submission scripts.  Several schedulers, including <tt class="docutils literal">at</tt>
uses by default <tt class="docutils literal">dash</tt> as the default scripting language.
Normally this is performed by creating a symbolic link to
<tt class="docutils literal">/bin/dash</tt> as <tt class="docutils literal">/bin/sh</tt>.  Change this default configuration in
order to make <tt class="docutils literal">sh</tt> point out to <tt class="docutils literal">bash</tt>.</p>
</li>
</ul>
</div>
</div>
</div>
</body>
</html>
